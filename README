
references:

- https://developer.apple.com/documentation/metal/performing-calculations-on-a-gpu
- https://developer.apple.com/documentation/metal/building-a-shader-library-by-precompiling-source-files

# Examples

## Example 1: metal -> air

Direct compilation using `metal -c`.

```bash
cd example-1
xcrun -sdk macosx metal -c shader.metal -o shader.air
xcrun -sdk macosx metallib shader.air -o shader.metallib
clang++ -std=c++17 -framework Metal -framework Foundation harness.mm -o harness
./harness
rm harness shader.air shader.metallib
cd ..
```

## Example 2: metal -> ll -> air

Compilation via LLVM IR. Note that we use the `metal` driver to compile `.ll` to `.air`.

```bash
cd example-2
./run.sh
cd ..
```
