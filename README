


msl compiler installation:

```
# install toolchain
xcode-select --install
xcodebuild -downloadComponent MetalToolchain

# mls -> ll
xcrun -sdk macosx metal -S -emit-llvm shader.metal -o reference.ll
xcrun -sdk macosx metal shader.metal -o shader.metallib

# metal -> air
cd example-1
xcrun -sdk macosx metal -c shader.metal -o shader.air
xcrun -sdk macosx metallib shader.air -o shader.metallib
clang++ -std=c++17 -framework Metal -framework Foundation harness.mm -o harness
./harness
rm harness shader.air shader.metallib
cd ..





xcrun -sdk macosx metal -o shader.ir -c shader.metal
xcrun -sdk macosx metal shader.ir
```

references:

- https://developer.apple.com/documentation/metal/performing-calculations-on-a-gpu
- https://developer.apple.com/documentation/metal/building-a-shader-library-by-precompiling-source-files
